<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>ุงูุฅุฌุงุฒุงุช</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="leaves.css" />
</head>

<body>

  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="user-box">
        <img src="/chef_pic1.jpg" class="avatar" alt="Avatar" />
        <div class="username">ูุฏูุฑ ุงููุธุงู</div>
      </div>

      <div class="menu">
        <a class="menu-item" href="/dashboard/dashboard.html">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
        <a class="menu-item" href="/inventory.html">ุงููุฎุฒู</a>
        <a class="menu-item" href="/recipes.html">ุงููุตูุงุช</a>
        <a class="menu-item" href="/employees.html">ุงูููุธููู</a>
        <a class="menu-item">ุงููุจูุนุงุช</a>
        <a class="menu-item" href="/withdrawals.html">ุณุญูุจุงุช</a>
        <a class="menu-item" href="/waste.html">ุงููุฏุฑ</a>
        <a class="menu-item" href="/attendance.html">ุงูุจุตูุฉ</a>
        <a class="menu-item" href="/work-hours.html">ุณุงุนุงุช ุงูุนูู</a>
        <a class="menu-item active" href="/leaves.html">ุงูุฅุฌุงุฒุงุช</a>
        <a class="menu-item" href="/notifications.html">๐ ุงูุฅุดุนุงุฑุงุช</a>
        <a class="menu-item">ุฅุฏุงุฑุฉ ุงููููู ุงูุฐููุฉ (AI)</a>
        <a class="menu-item">ุงูุฅุนุฏุงุฏุงุช</a>
        <a class="menu-item logout" id="logoutBtn">ุชุณุฌูู ุงูุฎุฑูุฌ</a>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="content">

      <!-- Topbar -->
      <div class="topbar">
        <h2 class="page-title">ุงูุฅุฌุงุฒุงุช</h2>
        <button class="btn-primary" onclick="openRequestModal()">โ ุทูุจ ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ</button>
      </div>

      <!-- Balance Cards -->
      <div class="balance-cards">
        <div class="balance-card">
          <div class="balance-icon">๐</div>
          <div class="balance-info">
            <div class="balance-label">ุงูุฅุฌุงุฒุงุช ุงูุณูููุฉ</div>
            <div class="balance-value">
              <span id="annualAvailable">0</span> / <span id="annualTotal">22</span> ููู
            </div>
            <div class="balance-progress">
              <div class="progress-bar" id="annualProgress"></div>
            </div>
          </div>
        </div>
        <div class="balance-card">
          <div class="balance-icon">๐ฅ</div>
          <div class="balance-info">
            <div class="balance-label">ุงูุฅุฌุงุฒุงุช ุงููุฑุถูุฉ</div>
            <div class="balance-value">
              <span id="sickAvailable">0</span> / <span id="sickTotal">30</span> ููู
            </div>
            <div class="balance-progress">
              <div class="progress-bar" id="sickProgress"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-section">
        <div class="filter-group">
          <label>ุงูุญุงูุฉ:</label>
          <select id="filterStatus">
            <option value="">ุงููู</option>
            <option value="pending">ููุฏ ุงูุงูุชุธุงุฑ</option>
            <option value="approved">ููุงูู ุนูููุง</option>
            <option value="rejected">ูุฑููุถุฉ</option>
          </select>
        </div>
        <div class="filter-group">
          <label>ููุน ุงูุฅุฌุงุฒุฉ:</label>
          <select id="filterLeaveType">
            <option value="">ุงููู</option>
            <option value="annual">ุณูููุฉ</option>
            <option value="sick">ูุฑุถูุฉ</option>
            <option value="mourning">ุญุฏุงุฏ</option>
            <option value="weekly">ุฃุณุจูุนูุฉ</option>
          </select>
        </div>
        <div class="filter-group">
          <button class="btn-filter" onclick="applyFilters()">๐ ุชุทุจูู</button>
          <button class="btn-filter" onclick="clearFilters()">๐ ุฅุนุงุฏุฉ ุชุนููู</button>
        </div>
      </div>

      <!-- My Leaves Table -->
      <div class="table-section">
        <h3>ุทูุจุงุชู</h3>
        <table class="table" id="leavesTable">
          <thead>
            <tr>
              <th>ููุน ุงูุฅุฌุงุฒุฉ</th>
              <th>ูู ุชุงุฑูุฎ</th>
              <th>ุฅูู ุชุงุฑูุฎ</th>
              <th>ุนุฏุฏ ุงูุฃูุงู</th>
              <th>ุงูุณุจุจ</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุงูุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <!-- All Leaves Table (Admin Only) -->
      <div class="table-section" id="adminSection" style="display: none;">
        <h3>ุฌููุน ุทูุจุงุช ุงูุฅุฌุงุฒุงุช</h3>
        <table class="table" id="allLeavesTable">
          <thead>
            <tr>
              <th>ุงูููุธู</th>
              <th>ููุน ุงูุฅุฌุงุฒุฉ</th>
              <th>ูู ุชุงุฑูุฎ</th>
              <th>ุฅูู ุชุงุฑูุฎ</th>
              <th>ุนุฏุฏ ุงูุฃูุงู</th>
              <th>ุงูุณุจุจ</th>
              <th>ุงูุญุงูุฉ</th>
              <th>ุงูุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

    </div>

  </div>

  <!-- Request Leave Modal -->
  <div class="modal" id="requestModal">
    <div class="modal-content">
      <h3>ุทูุจ ุฅุฌุงุฒุฉ ุฌุฏูุฏุฉ</h3>
      
      <div class="form-group">
        <label>ููุน ุงูุฅุฌุงุฒุฉ *</label>
        <select id="leaveType" required>
          <option value="">ุงุฎุชุฑ ููุน ุงูุฅุฌุงุฒุฉ</option>
          <option value="annual">ุณูููุฉ (ุฃูุตู 22 ููู)</option>
          <option value="sick">ูุฑุถูุฉ (ุฃูุตู 30 ููู)</option>
          <option value="mourning">ุญุฏุงุฏ</option>
          <option value="weekly">ุฃุณุจูุนูุฉ</option>
        </select>
      </div>

      <div class="form-group">
        <label>ูู ุชุงุฑูุฎ *</label>
        <input type="date" id="startDate" required />
      </div>

      <div class="form-group">
        <label>ุฅูู ุชุงุฑูุฎ *</label>
        <input type="date" id="endDate" required />
      </div>

      <div class="form-group">
        <label>ุนุฏุฏ ุงูุฃูุงู</label>
        <input type="text" id="totalDays" readonly />
      </div>

      <div class="form-group">
        <label>ุงูุณุจุจ (ุงุฎุชูุงุฑู)</label>
        <textarea id="leaveReason" rows="3" placeholder="ุงุฐูุฑ ุณุจุจ ุงูุฅุฌุงุฒุฉ..."></textarea>
      </div>

      <div class="modal-actions">
        <button class="btn-cancel" onclick="closeRequestModal()">ุฅูุบุงุก</button>
        <button class="btn-save" onclick="submitLeaveRequest()">ุฅุฑุณุงู ุงูุทูุจ</button>
      </div>
    </div>
  </div>

  <script src="common/auth-check.js"></script>
  <script src="common/sidebar.js"></script>
  <script src="common/permissions.js"></script>
  <script src="leaves.js"></script>

</body>

</html>

